<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="logos/plicon.png" type="images/x-icon" width="40" height="40">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Signika:wght@300..700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Calistoga&family=Josefin+Sans:ital,wght@0,100..700;1,100..700&display=swap" rel="stylesheet">
    <title>User Updates</title>
    <script type="module" src="https://unpkg.com/ionicons@4.5.10-0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule="" src="https://unpkg.com/ionicons@4.5.10-0/dist/ionicons/ionicons.js"></script>
    <style>
      * {
        margin: 0;
        border: 0;
        box-sizing: border-box;
      }

      ::placeholder {
   
        font-weight: bold;
        color: blue;
      }

      ::-webkit-scrollbar {
        display: none;
      }
     
    </style>

    
</head>
<body style="background-color: aliceblue; height: 100svh; width: 100vw; position: relative;">
    <header style="height: 10svh; width: 100vw; display: flex; align-items: center; justify-content: space-around;">
    

            <a href="/main"><ion-icon name="arrow-round-back" style="font-weight: bold; color: red; font-size: 2rem;"></ion-icon></a>

            <h1 style="margin:0 10px 10px 10px; font-weight: bold; font-family: 'Signika', sans-serif; font-size: 1.75rem; color: red;">User Updates</h1>
        
        
    </header>
    <section style="height: 4svh; width: 100vw; display: flex; align-items: center; justify-content: center;">
            
              <% if (locals.messages) { %>

                <h2 style="font-size: 1.1rem; margin-left: 20px; font-weight: bold; background-color: antiquewhite; color: limegreen; font-family: 'Signika', sans-serif;"><%= messages %></h2>

              <% } %>

        
    </section>

    <section class="user-form-wrapper" style="height: fit-content; width: clamp(350px, 75%, 700px); padding: 20px; border-radius: 10px; border: 2px solid grey; position: absolute; top: 40%; left: 50%; transform: translate(-50%, -50%); display: flex; flex-flow: column nowrap; justify-content: flex-start; align-items: center;">

         <h1 style="font-size: 1.5rem; color: purple; font-weight: bold; font-family: 'Signika', sans-serif; margin-bottom: 10px;"><%= user.teamName %></h1>
         <h2 style="width: 100%; font-size: 1.2rem; color: limegreen; font-family: 'Signika', sans-serif; margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center;"><%= user.managerName %>  <span style="color: green;"><%= user.userName %></span></h2>
         <h1 style="font-size: .95rem; margin-bottom: 15px;">Accnt. <span style="color: red; font-family: 'Signika', sans-serif; font-weight: bold; font-size: 1.4rem;">KES.<%= user.totalBalance %></span></h1>
         <h1 style="display: flex; margin-bottom: 10px; align-items: center; justify-content: space-between; width: 100%;"><img src="logos/paypal.png" alt="Paypal" height="20" width="70" /> <span style="color: blue; font-size: 1.2rem; font-family: 'Signika', sans-serif;"><%= user.payPal %></span></h1>
         <h1 style="display: flex; margin-bottom: 10px; align-items: center; justify-content: space-between; width: 100%;"><img src="logos/mpesa.png" alt="Mpesa" height="50" width="70" /> <span style="color: green; font-family: 'Signika', sans-serif;"><%= user.mpesa %></span></h1>
        
         <form action="/user-update?_method=PATCH" method="post" style="height: 15vh; display: flex; flex-flow: column nowrap; align-items: center; justify-content: center; width: 100%;">
            <input type="text" name="userid" value="<%= user._id %>" style="display: none;">
            <input type="number" name="amount" placeholder="Amount To Add.." style="font-size: 1.2rem; color: limegreen; font-weight: bold; text-align: center; border: 2px solid grey; border-radius: 10px; height: 40%; width: 100%; margin-bottom: 10px;">
            <button type="submit" style="height: 40%; width: 100%; border: none; outline: none; background-color: green; color: white; font-family: 'Signika', sans-serif; font-size: 1.3rem; font-weight: bold; border-radius: 10px;">Add Funds</button>
         </form>

    </section>

    <footer style="padding-block: 10px; position: fixed; bottom: 0; height: 30%; width: 100%; background-color: rgba(50, 205, 50, 0.37); scroll-snap-type: inline mandatory; scroll-padding-inline: 10px; overflow-x: hidden; overflow-y: scroll;">

      <% transactions.map((tranx) => { %>

           <% if ( tranx.tranx_type == 'Deposit' ) { %>

                  <div class="cards" style="padding: 10px; height: 30%; width: 95%; border-radius: 5px 40px 40px 5px; box-shadow: 0 5px 10px 0 rgba(0, 0, 0, 0.3), 0 6px 12px 0 rgba(0, 0, 0, 0.29); margin: 10px; display: flex; justify-content: space-between; align-items: center; background-color: #fff; scroll-snap-align: start;">
  
  
                              <div class="points"
                                  style=" height: 100%; margin-left: 5px; background-color: transparent; display: flex; justify-content: center; align-items: center; ">
  
                                  <h2
                                      style="color: green; font-weight: bold; font-size: 1.2rem; margin-right: 5px; font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;">
                                      Deposit
                                  </h2>
                                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                                      style="fill: limegreen;transform: msFilter">
                                      <path
                                          d="M3 19h18a1.002 1.002 0 0 0 .823-1.569l-9-13c-.373-.539-1.271-.539-1.645 0l-9 13A.999.999 0 0 0 3 19z">
                                      </path>
                                  </svg>
                              </div>
  
                              <div class="entry"
                                  style="height: 100%; width: 25%; display: flex; flex-flow: column nowrap; justify-content: center; align-items: center;">
  
                                  <h3
                                      style="color: purple; font-family: 'Signika', sans-serif; font-style: italic; font-size: .9rem; text-align: center;">
                                      <%= tranx.method %>
                                  </h3>
  
                                  <h3
                                      style="text-align: center; color: blue; margin: 0; font-style: italic; text-wrap: wrap; text-align: center; font-size: .6rem;">
                                      <%= tranx.createdAt %>
                                  </h3>
                                  <h3
                                      style="color: limegreen; font-family: 'Signika', sans-serif; font-style: italic; font-size: .75rem; text-align: center;">
                                      <%= tranx.status %>
                                  </h3>
  
                              </div>
                              <div class="points"
                                  style=" height: 100%; margin-left: 5px; background-color: transparent; display: flex; justify-content: center; align-items: center; ">
  
                                  <h2
                                      style="text-wrap: nowrap; font-weight: bold; margin-right: 5px; font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif; font-size: 1.2rem; color: limegreen;">
                                      <span>+</span>
                                      <%= tranx.amount %>
                                  </h2>
  
                              </div>
                  </div>

           <% } else { %>

                  <div class="cards"
                      style="padding: 10px; height: 30%; width: 95%; border-radius: 5px 40px 40px 5px; box-shadow: 0 5px 10px 0 rgba(0, 0, 0, 0.3), 0 6px 12px 0 rgba(0, 0, 0, 0.29); margin: 10px; display: flex; justify-content: space-between; align-items: center; background-color: #fff; scroll-snap-align: start;">
      
                      <div class="points"
                          style=" height: 100%; margin-left: 5px; background-color: transparent; display: flex; justify-content: center; align-items: center; ">
      
                          <h2
                              style="color: firebrick; font-weight: bold; font-size: 1.2rem; margin-right: 5px; font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;">
                              Withdraw
                          </h2>
                          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18"
                              viewBox="0 0 24 24" style="fill: rgb(230, 16, 16);transform: msFilter">
                              <path
                                  d="M11.178 19.569a.998.998 0 0 0 1.644 0l9-13A.999.999 0 0 0 21 5H3a1.002 1.002 0 0 0-.822 1.569l9 13z">
                              </path>
                          </svg>
                      </div>
      
                      <div class="entry"
                          style="height: 100%; width: 25%; display: flex; flex-flow: column nowrap; justify-content: center; align-items: center;">
      
                          <h3
                              style="color: purple; font-family: 'Signika', sans-serif; font-style: italic; font-size: .9rem; text-align: center;">
                              <%= tranx.method %>
                          </h3>
                          <h3
                              style="text-align: center; color: blue; margin: 0; font-style: italic; text-wrap: wrap; text-align: center; text-wrap: wrap; font-size: .6rem;">
                              <%= tranx.createdAt %>
                          </h3>
      
                          <% if (tranx.status=='settled' ) { %>
                              <h3
                                  style="color: limegreen; font-family: 'Signika', sans-serif; font-style: italic; font-size: .9rem; text-align: center;">
                                  <%= tranx.status %>
                              </h3>
      
                              <% } else { %>
                                  <h3
                                      style="color: red; font-family: 'Signika', sans-serif; font-style: italic; font-size: .9rem; text-align: center;">
                                      <%= tranx.status %>
                                  </h3>
      
                                  <% } %>
      
      
      
                      </div>
                      <div class="points"
                          style=" height: 100%; margin-left: 5px; background-color: transparent; display: flex; justify-content: center; align-items: center; ">
      
                          <h2
                              style="text-wrap: nowrap; font-weight: bold; margin-right: 5px; font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif; font-size: 1.2rem; color: red;">
                              <span>-</span>
                              <%= tranx.amount %>
                          </h2>
      
                      </div>
                  </div>

           <% } %>
         

      <% }) %>

     

     

    </footer>

    

            <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
            <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
           
    </body>
    </html>

